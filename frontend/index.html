<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groq Chatbot</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="brand">
                <div class="logo">🤖</div>
                <div class="titles">
                    <h1>Groq Chatbot</h1>
                    <p>Powered by Groq AI</p>
                </div>
            </div>
            <button id="themeToggle" aria-label="Toggle theme">
                <span class="icon">🌙</span>
            </button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="avatar">🤖</div>
                <div class="bubble">
                    <div class="message-content">
                        <p>Hello! I'm your AI assistant powered by Groq. How can I help you today?</p>
                    </div>
                    <div class="meta"><span class="time" id="welcomeTime"></span></div>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="input-wrapper">
                <textarea 
                    id="userInput" 
                    placeholder="Type your message here..." 
                    rows="1"
                    maxlength="2000"
                ></textarea>
                <button id="sendButton" onclick="sendMessage()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <button id="clearButton" onclick="clearChat()">Clear Chat</button>
        </div>
    </div>
    
    <p class="footer">Group project by Tanmay Bangar, Umakant Chauhan and Shaan Aigal</p>
    
    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const icon = themeToggle.querySelector('.icon');

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            body.classList.add('dark');
            icon.textContent = '☀️';
        }

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            const isDark = body.classList.contains('dark');
            icon.textContent = isDark ? '☀️' : '🌙';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        // Set welcome time
        document.getElementById('welcomeTime').textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

        // Auto-resize textarea
        const userInput = document.getElementById('userInput');
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 140) + 'px';
        });

        // Send message on Enter (Shift+Enter for new line)
        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Placeholder functions (replace with your actual implementation)
        function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            userInput.value = '';
            userInput.style.height = 'auto';

            // Show typing indicator
            showTypingIndicator();

            // Simulate bot response (replace with actual API call)
            setTimeout(() => {
                hideTypingIndicator();
                addMessage('This is a demo response. Connect to your Groq API for real responses!', 'bot');
            }, 1500);
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const avatar = sender === 'user' ? '👤' : '🤖';
            
            messageDiv.innerHTML = `
                <div class="avatar">${avatar}</div>
                <div class="bubble">
                    <div class="message-content">
                        <p>${text}</p>
                    </div>
                    <div class="meta"><span class="time">${time}</span></div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="avatar">🤖</div>
                <div class="bubble">
                    <div class="message-content">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function clearChat() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = `
                <div class="message bot-message">
                    <div class="avatar">🤖</div>
                    <div class="bubble">
                        <div class="message-content">
                            <p>Hello! I'm your AI assistant powered by Groq. How can I help you today?</p>
                        </div>
                        <div class="meta"><span class="time">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span></div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>